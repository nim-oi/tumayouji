package database;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

import beans.ResBean;

public class InsertRes{
	public static void main(String[] args){
		//InsertTest.insertRes_Table(args[0],args[1]);
	}
	
	public static int insertResTable(String resname,String restext){
		int count = 0; //?????????s?????????????
		try{
			//Driver?C???^?[?t?F?C?X??????????N???X?????[?h????
			Class.forName("oracle.jdbc.driver.OracleDriver");
			
			//Connection?C???^?[?t?F?C?X??????????N???X??
			//?C???X?^???X????
			Connection cn=
				DriverManager.getConnection(
					"jdbc:oracle:thin:@localhost:1521:orcl","yuje","0131");
			
			//?????R?~?b?g??OFF?????
			cn.setAutoCommit(false);
			
			System.out.println("???????");
			int thread_id=
			//SQL????????i?[????
			String sql="insert into res_table(resname,restext,threadid) values('"+resname+"','"+restext+"','+threadid+')";
			
			//Statement?C???^?[?t?F?C?X??????????N???X??
			//?C???X?^???X???èÔ????
			Statement st=cn.createStatement();
			
			//SQL?????s???g?????U?N?V???????J?n?????B????????????????
			count=st.executeUpdate(sql);
			
			System.out.println(count+"??????????");
			
			//?g?????U?N?V???????R?~?b?g????
			cn.commit();
			
			//?X?e?[?g?????g???N???[?Y????
			st.close();
			
			//RDBMS?????f????
			cn.close();
			
			System.out.println("??f????");
			
		}catch(ClassNotFoundException e){
			e.printStackTrace();
		}catch(SQLException e){
			e.printStackTrace();
		}
		return count;
	}
}

